{"version":3,"sources":["webpack:///chapter_02/main.js","webpack:///webpack/bootstrap 32dd76c64819d070ad88","webpack:///./src/chapter_02/main.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","2","setup","texture","TextureCache","rectangle","Rectangle","frame","rockman","Sprite","console","log","x","renderer","view","width","y","height","vx","vy","accelerationX","accelerationY","frictionX","FRICTION","frictionY","stage","addChild","initKeyboard","gameLoop","requestAnimationFrame","state","render","play","GRAVITY","collision","contain","has","left","keyboard","up","right","down","press","ACCELERATION_X","release","isDown","ACCELERATION_Y","Container","PIXI","Loader","loader","Renderer","autoDetectRenderer","resources","utils","Texture","style","border","backgroundColor","document","getElementById","appendChild","add","load"],"mappings":"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","file":"chapter_02/main.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 2:\n/***/ (function(module, exports) {\n\n/**\n * @fileoverview Moving Sprites\n * @author burning <iburning@live.cn>\n * @version 2017.08.24\n */\n\n//Aliases\nvar Container = PIXI.Container;\nvar Loader = PIXI.loader;\nvar Rectangle = PIXI.Rectangle;\nvar Renderer = PIXI.autoDetectRenderer;\nvar Resources = PIXI.loader.resources;\nvar Sprite = PIXI.Sprite;\nvar TextureCache = PIXI.utils.TextureCache;\nvar Texture = PIXI.Texture;\n\nvar UNIT = 45;\nvar ACCELERATION_X = 1; // 水平方向加速度\nvar ACCELERATION_Y = 3; // 垂直方向加速度\nvar GRAVITY = 1; // 0.5         // 重力加速度\nvar FRICTION = 0.9; // 摩擦系数（速度衰减）\n\n\n// Set the game's current state to 'play'\nvar state = play;\nvar rockman = null;\n\nvar renderer = Renderer(50 * 16, 50 * 9);\n//Set the canvas's border style and background color\nrenderer.view.style.border = \"1px solid #333\";\nrenderer.backgroundColor = \"0xFFFFFF\";\n\n// Add the canvas to the HTML document\ndocument.getElementById(\"pixi\").appendChild(renderer.view);\n\n// Create a container object called the 'stage'\nvar stage = new Container();\n\n// Tell the 'renderder' to 'render' the 'stage'\nrenderer.render(stage);\n\n// scaleToWindow(renderer.view)\n//\n// window.addEventListener(\"resize\", event => {\n//   scaleToWindow(renderer.view)\n// })\n\n\nLoader.add([\"assets/rockman.gif\"]).load(setup);\n\nfunction setup() {\n  // Create the 'tileset' sprite from the texture\n  var texture = TextureCache[\"assets/rockman.gif\"];\n  // console.log('texture', texture)\n\n  // Create a rectangle object that defines the position and\n  // size of the sub-image you want to extract from the texture\n  var rectangle = new Rectangle(140, 0, 50, 100);\n  // console.log('rectangle', rectangle)\n\n  // Tell the texture to use that rectangular section\n  texture.frame = rectangle;\n\n  // Create the sprite from the texture\n  rockman = new Sprite(texture);\n  console.log(\"rockman\", rockman);\n\n  // Center the sprite\n  rockman.x = renderer.view.width / 2 - rockman.width / 2;\n  rockman.y = renderer.view.height / 2 - rockman.height / 2;\n\n  // Initialize the sprites's velocity variables\n  rockman.vx = 0;\n  rockman.vy = 0;\n\n  rockman.accelerationX = 0;\n  rockman.accelerationY = 0;\n  rockman.frictionX = FRICTION;\n  rockman.frictionY = FRICTION;\n\n  // Add the sprite to the stage\n  stage.addChild(rockman);\n\n  // // Render the stage\n  // renderer.render(stage)\n\n  initKeyboard();\n\n  // Start the game loop\n  gameLoop();\n}\n\nfunction gameLoop() {\n  // Loop this function 60 times pre second\n  requestAnimationFrame(gameLoop);\n\n  // Update the current game state:\n  state();\n\n  // Render the stage\n  renderer.render(stage);\n}\n\nfunction play() {\n  // Apply acceleration by adding acceleration to the sprite's volocity\n  rockman.vx += rockman.accelerationX;\n  rockman.vy += rockman.accelerationY;\n\n  // Apply friction by multiplying sprite's velocity by the friction\n  rockman.vx *= rockman.frictionX;\n  rockman.vy *= rockman.frictionY;\n\n  // Gravity\n  rockman.vy += GRAVITY;\n\n  // Apply the velocity to the sprite's position to make it move\n  rockman.x += rockman.vx;\n  rockman.y += rockman.vy;\n\n  // Use the 'contain' function to keep the sprite inside the canvas\n  var collision = contain(rockman, {\n    x: 0,\n    y: 0,\n    width: renderer.view.width,\n    height: renderer.view.height\n  });\n\n  // Check for a collision.\n  // If the value of 'collision' isn't 'undefined'\n  // then you know the sprite hit a boundary\n\n  if (collision) {\n    console.log(\"collision\", collision);\n    // Reverse the sprite's 'vx' value if it hits the left or right\n    if (collision.has(\"left\") || collision.has(\"right\")) {\n      rockman.vx = -rockman.vx;\n    }\n\n    // Reverse the sprite's 'vy' vlaue if it hits the top or bottom\n    if (collision.has(\"top\") || collision.has(\"bottom\")) {\n      rockman.vy = -rockman.vy;\n    }\n  }\n}\n\nfunction initKeyboard() {\n  // Capture the keyboard arrow keys\n  var left = keyboard(37);\n  var up = keyboard(38);\n  var right = keyboard(39);\n  var down = keyboard(40);\n\n  // Left arrow key 'press' method\n  left.press = function () {\n    rockman.accelerationX = -ACCELERATION_X;\n  };\n\n  // Left arrow key 'release' method\n  left.release = function () {\n    if (!right.isDown) {\n      rockman.accelerationX = 0;\n    }\n  };\n\n  right.press = function () {\n    rockman.accelerationX = ACCELERATION_X;\n  };\n\n  right.release = function () {\n    if (!left.isDown) {\n      rockman.accelerationX = 0;\n    }\n  };\n\n  up.press = function () {\n    rockman.accelerationY = -ACCELERATION_Y;\n  };\n\n  up.release = function () {\n    if (!down.isDown) {\n      rockman.accelerationY = 0;\n    }\n  };\n\n  down.press = function () {\n    rockman.accelerationY = ACCELERATION_Y;\n  };\n\n  down.release = function () {\n    if (!up.isDown) {\n      rockman.accelerationY = 0;\n    }\n  };\n}\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// chapter_02/main.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 32dd76c64819d070ad88","/**\n * @fileoverview Moving Sprites\n * @author burning <iburning@live.cn>\n * @version 2017.08.24\n */\n\n\n//Aliases\nconst Container = PIXI.Container\nconst Loader = PIXI.loader\nconst Rectangle = PIXI.Rectangle\nconst Renderer = PIXI.autoDetectRenderer\nconst Resources = PIXI.loader.resources\nconst Sprite = PIXI.Sprite\nconst TextureCache = PIXI.utils.TextureCache\nconst Texture = PIXI.Texture\n\nconst UNIT = 45\nconst ACCELERATION_X = 1    // 水平方向加速度\nconst ACCELERATION_Y = 3    // 垂直方向加速度\nconst GRAVITY = 1  // 0.5         // 重力加速度\nconst FRICTION = 0.9     // 摩擦系数（速度衰减）\n\n\n// Set the game's current state to 'play'\nlet state = play\nlet rockman = null\n\nconst renderer = Renderer(50 * 16, 50 * 9)\n//Set the canvas's border style and background color\nrenderer.view.style.border = \"1px solid #333\"\nrenderer.backgroundColor = \"0xFFFFFF\"\n\n// Add the canvas to the HTML document\ndocument.getElementById(\"pixi\").appendChild(renderer.view)\n\n// Create a container object called the 'stage'\nconst stage = new Container()\n\n// Tell the 'renderder' to 'render' the 'stage'\nrenderer.render(stage)\n\n// scaleToWindow(renderer.view)\n//\n// window.addEventListener(\"resize\", event => {\n//   scaleToWindow(renderer.view)\n// })\n\n\nLoader.add([\n  \"assets/rockman.gif\",\n]).load(setup)\n\n\nfunction setup() {\n  // Create the 'tileset' sprite from the texture\n  let texture = TextureCache[\"assets/rockman.gif\"]\n  // console.log('texture', texture)\n\n  // Create a rectangle object that defines the position and\n  // size of the sub-image you want to extract from the texture\n  let rectangle = new Rectangle(140, 0, 50, 100)\n  // console.log('rectangle', rectangle)\n\n  // Tell the texture to use that rectangular section\n  texture.frame = rectangle\n\n  // Create the sprite from the texture\n  rockman = new Sprite(texture)\n  console.log(\"rockman\", rockman)\n\n  // Center the sprite\n  rockman.x = renderer.view.width / 2 - rockman.width / 2\n  rockman.y = renderer.view.height / 2 - rockman.height / 2\n\n  // Initialize the sprites's velocity variables\n  rockman.vx = 0\n  rockman.vy = 0\n\n  rockman.accelerationX = 0\n  rockman.accelerationY = 0\n  rockman.frictionX = FRICTION\n  rockman.frictionY = FRICTION\n\n  // Add the sprite to the stage\n  stage.addChild(rockman)\n\n  // // Render the stage\n  // renderer.render(stage)\n\n  initKeyboard()\n\n  // Start the game loop\n  gameLoop()\n}\n\n\nfunction gameLoop() {\n  // Loop this function 60 times pre second\n  requestAnimationFrame(gameLoop)\n\n  // Update the current game state:\n  state()\n\n  // Render the stage\n  renderer.render(stage)\n}\n\n\nfunction play() {\n  // Apply acceleration by adding acceleration to the sprite's volocity\n  rockman.vx += rockman.accelerationX\n  rockman.vy += rockman.accelerationY\n\n  // Apply friction by multiplying sprite's velocity by the friction\n  rockman.vx *= rockman.frictionX\n  rockman.vy *= rockman.frictionY\n\n  // Gravity\n  rockman.vy += GRAVITY\n\n  // Apply the velocity to the sprite's position to make it move\n  rockman.x += rockman.vx\n  rockman.y += rockman.vy\n\n  // Use the 'contain' function to keep the sprite inside the canvas\n  let collision = contain(rockman, {\n    x: 0,\n    y: 0,\n    width: renderer.view.width,\n    height: renderer.view.height\n  })\n\n  // Check for a collision.\n  // If the value of 'collision' isn't 'undefined'\n  // then you know the sprite hit a boundary\n\n  if (collision) {\n    console.log(\"collision\", collision)\n    // Reverse the sprite's 'vx' value if it hits the left or right\n    if (collision.has(\"left\") || collision.has(\"right\")) {\n      rockman.vx = -rockman.vx\n    }\n\n    // Reverse the sprite's 'vy' vlaue if it hits the top or bottom\n    if (collision.has(\"top\") || collision.has(\"bottom\")) {\n      rockman.vy = -rockman.vy\n    }\n  }\n}\n\nfunction initKeyboard() {\n  // Capture the keyboard arrow keys\n  let left = keyboard(37)\n  let up = keyboard(38)\n  let right = keyboard(39)\n  let down = keyboard(40)\n\n  // Left arrow key 'press' method\n  left.press = () => {\n    rockman.accelerationX = -ACCELERATION_X\n  }\n\n  // Left arrow key 'release' method\n  left.release = () => {\n    if (!right.isDown) {\n      rockman.accelerationX = 0\n    }\n  }\n\n  right.press = () => {\n    rockman.accelerationX = ACCELERATION_X\n  }\n\n  right.release = () => {\n    if (!left.isDown) {\n      rockman.accelerationX = 0\n    }\n  }\n\n  up.press = () => {\n    rockman.accelerationY = -ACCELERATION_Y\n  }\n\n  up.release = () => {\n    if (!down.isDown) {\n      rockman.accelerationY = 0\n    }\n  }\n\n  down.press = () => {\n    rockman.accelerationY = ACCELERATION_Y\n  }\n\n  down.release = () => {\n    if (!up.isDown) {\n      rockman.accelerationY = 0\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/chapter_02/main.js"],"sourceRoot":""}